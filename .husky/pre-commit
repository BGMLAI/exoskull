#!/usr/bin/env sh

# Pre-commit hook: lint staged files + TypeScript build check
cd exoskull-app

echo "[pre-commit] Running lint-staged..."
npx lint-staged || exit 1

echo "[pre-commit] Running TypeScript build check..."
npx next build 2>&1 | tail -5
BUILD_EXIT=$?

if [ $BUILD_EXIT -ne 0 ]; then
  echo "[pre-commit] BUILD FAILED - fix TypeScript errors before committing"
  exit 1
fi

echo "[pre-commit] All checks passed"
