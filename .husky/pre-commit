#!/usr/bin/env sh

# Pre-commit hook: lint staged files + TypeScript build check
cd exoskull-app

echo "[pre-commit] Running lint-staged..."
npx lint-staged || exit 1

echo "[pre-commit] Running TypeScript check..."
npx tsc --noEmit 2>&1 | tail -5
TSC_EXIT=$?

if [ $TSC_EXIT -ne 0 ]; then
  echo "[pre-commit] TypeScript errors found - fix before committing"
  exit 1
fi

echo "[pre-commit] All checks passed"
