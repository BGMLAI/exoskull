"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/voice/tools/route";
exports.ids = ["app/api/voice/tools/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvoice%2Ftools%2Froute&page=%2Fapi%2Fvoice%2Ftools%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvoice%2Ftools%2Froute.ts&appDir=C%3A%5CUsers%5Cbogum%5Cexoskull%5Cexoskull-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbogum%5Cexoskull%5Cexoskull-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvoice%2Ftools%2Froute&page=%2Fapi%2Fvoice%2Ftools%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvoice%2Ftools%2Froute.ts&appDir=C%3A%5CUsers%5Cbogum%5Cexoskull%5Cexoskull-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbogum%5Cexoskull%5Cexoskull-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_bogum_exoskull_exoskull_app_app_api_voice_tools_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/voice/tools/route.ts */ \"(rsc)/./app/api/voice/tools/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/voice/tools/route\",\n        pathname: \"/api/voice/tools\",\n        filename: \"route\",\n        bundlePath: \"app/api/voice/tools/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\bogum\\\\exoskull\\\\exoskull-app\\\\app\\\\api\\\\voice\\\\tools\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_bogum_exoskull_exoskull_app_app_api_voice_tools_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/voice/tools/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2b2ljZSUyRnRvb2xzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ2b2ljZSUyRnRvb2xzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdm9pY2UlMkZ0b29scyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNib2d1bSU1Q2V4b3NrdWxsJTVDZXhvc2t1bGwtYXBwJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNib2d1bSU1Q2V4b3NrdWxsJTVDZXhvc2t1bGwtYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzBCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhvc2t1bGwvPzk1NGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcYm9ndW1cXFxcZXhvc2t1bGxcXFxcZXhvc2t1bGwtYXBwXFxcXGFwcFxcXFxhcGlcXFxcdm9pY2VcXFxcdG9vbHNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3ZvaWNlL3Rvb2xzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdm9pY2UvdG9vbHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3ZvaWNlL3Rvb2xzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcYm9ndW1cXFxcZXhvc2t1bGxcXFxcZXhvc2t1bGwtYXBwXFxcXGFwcFxcXFxhcGlcXFxcdm9pY2VcXFxcdG9vbHNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdm9pY2UvdG9vbHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvoice%2Ftools%2Froute&page=%2Fapi%2Fvoice%2Ftools%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvoice%2Ftools%2Froute.ts&appDir=C%3A%5CUsers%5Cbogum%5Cexoskull%5Cexoskull-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbogum%5Cexoskull%5Cexoskull-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/voice/tools/route.ts":
/*!**************************************!*\
  !*** ./app/api/voice/tools/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n\n\nconst supabaseUrl = \"https://uvupnwvkzreikurymncs.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n// Use service role for server-side operations\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseServiceKey);\n// VAPI Tool Handlers\nasync function getTasks(tenantId) {\n    const { data, error } = await supabase.from(\"exo_tasks\").select(\"id, title, status, priority, due_date, description, energy_required\").eq(\"tenant_id\", tenantId).neq(\"status\", \"cancelled\").order(\"priority\", {\n        ascending: true\n    }).order(\"due_date\", {\n        ascending: true,\n        nullsFirst: false\n    }).limit(20);\n    if (error) {\n        console.error(\"Error fetching tasks:\", error);\n        return {\n            tasks: [],\n            error: error.message\n        };\n    }\n    return {\n        tasks: data || [],\n        count: data?.length || 0\n    };\n}\nasync function createTask(tenantId, params) {\n    const { data, error } = await supabase.from(\"exo_tasks\").insert({\n        tenant_id: tenantId,\n        title: params.title,\n        priority: params.priority || 3,\n        due_date: params.due_date || null,\n        description: params.description || null,\n        energy_required: params.energy_required || null,\n        status: \"pending\"\n    }).select().single();\n    if (error) {\n        console.error(\"Error creating task:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n    return {\n        success: true,\n        task: data,\n        message: `Zadanie \"${params.title}\" zostaÅ‚o dodane`\n    };\n}\nasync function completeTask(tenantId, taskId) {\n    const { data, error } = await supabase.from(\"exo_tasks\").update({\n        status: \"done\",\n        completed_at: new Date().toISOString()\n    }).eq(\"id\", taskId).eq(\"tenant_id\", tenantId).select().single();\n    if (error) {\n        console.error(\"Error completing task:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n    return {\n        success: true,\n        task: data,\n        message: `Zadanie oznaczone jako wykonane`\n    };\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        console.log(\"\\uD83D\\uDD27 VAPI Tool Call received:\", JSON.stringify(body, null, 2));\n        // VAPI sends function calls in message.functionCall\n        const { message, call } = body;\n        // PRIMARY: Get tenant_id from URL query params (most reliable)\n        const url = new URL(request.url);\n        const urlTenantId = url.searchParams.get(\"tenant_id\");\n        const conversationId = url.searchParams.get(\"conversation_id\");\n        console.log(\"\\uD83D\\uDD17 URL params:\", {\n            tenant_id: urlTenantId,\n            conversation_id: conversationId\n        });\n        // FALLBACK: Get from VAPI payload (backup)\n        const payloadTenantId = call?.metadata?.tenant_id || call?.assistantOverrides?.variableValues?.tenant_id || call?.assistant?.metadata?.tenant_id || message?.call?.metadata?.tenant_id;\n        // Use URL param first, fallback to payload\n        const tenantId = urlTenantId || payloadTenantId;\n        if (!tenantId) {\n            console.error(\"âŒ No tenant_id found in URL or payload\");\n            console.error(\"URL:\", request.url);\n            console.error(\"Call:\", JSON.stringify(call, null, 2));\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                result: {\n                    error: \"Nie moÅ¼na zidentyfikowaÄ‡ uÅ¼ytkownika. Spr\\xf3buj zalogowaÄ‡ siÄ™ ponownie.\",\n                    tasks: []\n                }\n            });\n        }\n        console.log(\"\\uD83D\\uDC64 Found tenant_id:\", tenantId, urlTenantId ? \"(from URL)\" : \"(from payload)\");\n        // Handle function call - check for tool-calls (new format) or function-call (old format)\n        if (message?.type === \"tool-calls\" || message?.type === \"function-call\" || message?.functionCall) {\n            // VAPI new format: toolCallList array\n            const toolCalls = message?.toolCallList || message?.toolWithToolCallList || (message?.functionCall ? [\n                {\n                    id: message.functionCall.id || \"unknown\",\n                    name: message.functionCall.name,\n                    parameters: message.functionCall.parameters\n                }\n            ] : []);\n            // If using old format\n            if (toolCalls.length === 0 && message?.functionCall) {\n                const functionCall = message.functionCall;\n                const functionName = functionCall.name;\n                const parameters = functionCall.parameters || {};\n                const toolCallId = functionCall.id || body?.toolCallId || \"unknown\";\n                console.log(`ðŸ“ž Function: ${functionName}, Params:`, parameters, `ToolCallId:`, toolCallId);\n                let resultData;\n                switch(functionName){\n                    case \"get_tasks\":\n                        resultData = await getTasks(tenantId);\n                        break;\n                    case \"create_task\":\n                        resultData = await createTask(tenantId, parameters);\n                        break;\n                    case \"complete_task\":\n                        resultData = await completeTask(tenantId, parameters.task_id);\n                        break;\n                    default:\n                        resultData = {\n                            error: `Unknown function: ${functionName}`\n                        };\n                }\n                console.log(`âœ… Result:`, resultData);\n                // VAPI expects results array with toolCallId and result as STRING\n                const resultString = typeof resultData === \"string\" ? resultData : JSON.stringify(resultData);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    results: [\n                        {\n                            toolCallId: toolCallId,\n                            result: resultString\n                        }\n                    ]\n                });\n            }\n            // Handle new tool-calls format with toolCallList\n            const results = [];\n            for (const toolCall of toolCalls){\n                const functionName = toolCall.name || toolCall.function?.name;\n                const parameters = toolCall.parameters || toolCall.function?.arguments || {};\n                const toolCallId = toolCall.id || toolCall.toolCall?.id || \"unknown\";\n                console.log(`ðŸ“ž Function: ${functionName}, Params:`, parameters, `ToolCallId:`, toolCallId);\n                let resultData;\n                switch(functionName){\n                    case \"get_tasks\":\n                        resultData = await getTasks(tenantId);\n                        break;\n                    case \"create_task\":\n                        resultData = await createTask(tenantId, parameters);\n                        break;\n                    case \"complete_task\":\n                        resultData = await completeTask(tenantId, parameters.task_id);\n                        break;\n                    default:\n                        resultData = {\n                            error: `Unknown function: ${functionName}`\n                        };\n                }\n                console.log(`âœ… Result for ${functionName}:`, resultData);\n                // Convert result to string (VAPI requirement)\n                const resultString = typeof resultData === \"string\" ? resultData : JSON.stringify(resultData);\n                results.push({\n                    toolCallId: toolCallId,\n                    result: resultString\n                });\n            }\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                results\n            });\n        }\n        // Handle other message types (transcript, end-of-call, etc.)\n        if (message?.type === \"end-of-call-report\") {\n            console.log(\"\\uD83D\\uDCCA Call ended:\", message);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                received: true\n            });\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            received: true\n        });\n    } catch (error) {\n        console.error(\"âŒ Tool handler error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            result: {\n                error: error.message || \"Internal error\"\n            }\n        }, {\n            status: 500\n        });\n    }\n}\n// Handle OPTIONS for CORS\nasync function OPTIONS() {\n    return new next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"](null, {\n        status: 200,\n        headers: {\n            \"Access-Control-Allow-Origin\": \"*\",\n            \"Access-Control-Allow-Methods\": \"POST, OPTIONS\",\n            \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBRUEsT0FBT3BGLGtGQUFZQSxDQUFDZ0QsSUFBSSxDQUFDO1lBQUVvQyxVQUFVO1FBQUs7SUFFNUMsRUFBRSxPQUFPeEUsT0FBWTtRQUNuQlMsUUFBUVQsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBT1osa0ZBQVlBLENBQUNnRCxJQUFJLENBQ3RCO1lBQUVpQixRQUFRO2dCQUFFckQsT0FBT0EsTUFBTVcsT0FBTyxJQUFJO1lBQWlCO1FBQUUsR0FDdkQ7WUFBRVksUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFQSwwQkFBMEI7QUFDbkIsZUFBZWtEO0lBQ3BCLE9BQU8sSUFBSXJGLGtGQUFZQSxDQUFDLE1BQU07UUFDNUJtQyxRQUFRO1FBQ1JtRCxTQUFTO1lBQ1AsK0JBQStCO1lBQy9CLGdDQUFnQztZQUNoQyxnQ0FBZ0M7UUFDbEM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhvc2t1bGwvLi9hcHAvYXBpL3ZvaWNlL3Rvb2xzL3JvdXRlLnRzPzY5NDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIVxyXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIVxyXG5cclxuLy8gVXNlIHNlcnZpY2Ugcm9sZSBmb3Igc2VydmVyLXNpZGUgb3BlcmF0aW9uc1xyXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5KVxyXG5cclxuLy8gVkFQSSBUb29sIEhhbmRsZXJzXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFRhc2tzKHRlbmFudElkOiBzdHJpbmcpIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2V4b190YXNrcycpXHJcbiAgICAuc2VsZWN0KCdpZCwgdGl0bGUsIHN0YXR1cywgcHJpb3JpdHksIGR1ZV9kYXRlLCBkZXNjcmlwdGlvbiwgZW5lcmd5X3JlcXVpcmVkJylcclxuICAgIC5lcSgndGVuYW50X2lkJywgdGVuYW50SWQpXHJcbiAgICAubmVxKCdzdGF0dXMnLCAnY2FuY2VsbGVkJylcclxuICAgIC5vcmRlcigncHJpb3JpdHknLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxyXG4gICAgLm9yZGVyKCdkdWVfZGF0ZScsIHsgYXNjZW5kaW5nOiB0cnVlLCBudWxsc0ZpcnN0OiBmYWxzZSB9KVxyXG4gICAgLmxpbWl0KDIwKVxyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHRhc2tzOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIHsgdGFza3M6IFtdLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdGFza3M6IGRhdGEgfHwgW10sXHJcbiAgICBjb3VudDogZGF0YT8ubGVuZ3RoIHx8IDBcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRhc2sodGVuYW50SWQ6IHN0cmluZywgcGFyYW1zOiB7XHJcbiAgdGl0bGU6IHN0cmluZ1xyXG4gIHByaW9yaXR5PzogbnVtYmVyXHJcbiAgZHVlX2RhdGU/OiBzdHJpbmdcclxuICBkZXNjcmlwdGlvbj86IHN0cmluZ1xyXG4gIGVuZXJneV9yZXF1aXJlZD86IG51bWJlclxyXG59KSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdleG9fdGFza3MnKVxyXG4gICAgLmluc2VydCh7XHJcbiAgICAgIHRlbmFudF9pZDogdGVuYW50SWQsXHJcbiAgICAgIHRpdGxlOiBwYXJhbXMudGl0bGUsXHJcbiAgICAgIHByaW9yaXR5OiBwYXJhbXMucHJpb3JpdHkgfHwgMywgLy8gZGVmYXVsdCBtZWRpdW1cclxuICAgICAgZHVlX2RhdGU6IHBhcmFtcy5kdWVfZGF0ZSB8fCBudWxsLFxyXG4gICAgICBkZXNjcmlwdGlvbjogcGFyYW1zLmRlc2NyaXB0aW9uIHx8IG51bGwsXHJcbiAgICAgIGVuZXJneV9yZXF1aXJlZDogcGFyYW1zLmVuZXJneV9yZXF1aXJlZCB8fCBudWxsLFxyXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJ1xyXG4gICAgfSlcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLnNpbmdsZSgpXHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdGFzazonLCBlcnJvcilcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc3VjY2VzczogdHJ1ZSxcclxuICAgIHRhc2s6IGRhdGEsXHJcbiAgICBtZXNzYWdlOiBgWmFkYW5pZSBcIiR7cGFyYW1zLnRpdGxlfVwiIHpvc3RhxYJvIGRvZGFuZWBcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNvbXBsZXRlVGFzayh0ZW5hbnRJZDogc3RyaW5nLCB0YXNrSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnZXhvX3Rhc2tzJylcclxuICAgIC51cGRhdGUoe1xyXG4gICAgICBzdGF0dXM6ICdkb25lJyxcclxuICAgICAgY29tcGxldGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pXHJcbiAgICAuZXEoJ2lkJywgdGFza0lkKVxyXG4gICAgLmVxKCd0ZW5hbnRfaWQnLCB0ZW5hbnRJZClcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLnNpbmdsZSgpXHJcblxyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY29tcGxldGluZyB0YXNrOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgdGFzazogZGF0YSxcclxuICAgIG1lc3NhZ2U6IGBaYWRhbmllIG96bmFjem9uZSBqYWtvIHd5a29uYW5lYFxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcclxuXHJcbiAgICBjb25zb2xlLmxvZygn8J+UpyBWQVBJIFRvb2wgQ2FsbCByZWNlaXZlZDonLCBKU09OLnN0cmluZ2lmeShib2R5LCBudWxsLCAyKSlcclxuXHJcbiAgICAvLyBWQVBJIHNlbmRzIGZ1bmN0aW9uIGNhbGxzIGluIG1lc3NhZ2UuZnVuY3Rpb25DYWxsXHJcbiAgICBjb25zdCB7IG1lc3NhZ2UsIGNhbGwgfSA9IGJvZHlcclxuXHJcbiAgICAvLyBQUklNQVJZOiBHZXQgdGVuYW50X2lkIGZyb20gVVJMIHF1ZXJ5IHBhcmFtcyAobW9zdCByZWxpYWJsZSlcclxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpXHJcbiAgICBjb25zdCB1cmxUZW5hbnRJZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCd0ZW5hbnRfaWQnKVxyXG4gICAgY29uc3QgY29udmVyc2F0aW9uSWQgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnY29udmVyc2F0aW9uX2lkJylcclxuXHJcbiAgICBjb25zb2xlLmxvZygn8J+UlyBVUkwgcGFyYW1zOicsIHsgdGVuYW50X2lkOiB1cmxUZW5hbnRJZCwgY29udmVyc2F0aW9uX2lkOiBjb252ZXJzYXRpb25JZCB9KVxyXG5cclxuICAgIC8vIEZBTExCQUNLOiBHZXQgZnJvbSBWQVBJIHBheWxvYWQgKGJhY2t1cClcclxuICAgIGNvbnN0IHBheWxvYWRUZW5hbnRJZCA9IGNhbGw/Lm1ldGFkYXRhPy50ZW5hbnRfaWRcclxuICAgICAgfHwgY2FsbD8uYXNzaXN0YW50T3ZlcnJpZGVzPy52YXJpYWJsZVZhbHVlcz8udGVuYW50X2lkXHJcbiAgICAgIHx8IGNhbGw/LmFzc2lzdGFudD8ubWV0YWRhdGE/LnRlbmFudF9pZFxyXG4gICAgICB8fCBtZXNzYWdlPy5jYWxsPy5tZXRhZGF0YT8udGVuYW50X2lkXHJcblxyXG4gICAgLy8gVXNlIFVSTCBwYXJhbSBmaXJzdCwgZmFsbGJhY2sgdG8gcGF5bG9hZFxyXG4gICAgY29uc3QgdGVuYW50SWQgPSB1cmxUZW5hbnRJZCB8fCBwYXlsb2FkVGVuYW50SWRcclxuXHJcbiAgICBpZiAoIXRlbmFudElkKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBObyB0ZW5hbnRfaWQgZm91bmQgaW4gVVJMIG9yIHBheWxvYWQnKVxyXG4gICAgICBjb25zb2xlLmVycm9yKCdVUkw6JywgcmVxdWVzdC51cmwpXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NhbGw6JywgSlNPTi5zdHJpbmdpZnkoY2FsbCwgbnVsbCwgMikpXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgcmVzdWx0OiB7XHJcbiAgICAgICAgICBlcnJvcjogJ05pZSBtb8W8bmEgemlkZW50eWZpa293YcSHIHXFvHl0a293bmlrYS4gU3Byw7NidWogemFsb2dvd2HEhyBzacSZIHBvbm93bmllLicsXHJcbiAgICAgICAgICB0YXNrczogW11cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ/CfkaQgRm91bmQgdGVuYW50X2lkOicsIHRlbmFudElkLCB1cmxUZW5hbnRJZCA/ICcoZnJvbSBVUkwpJyA6ICcoZnJvbSBwYXlsb2FkKScpXHJcblxyXG4gICAgLy8gSGFuZGxlIGZ1bmN0aW9uIGNhbGwgLSBjaGVjayBmb3IgdG9vbC1jYWxscyAobmV3IGZvcm1hdCkgb3IgZnVuY3Rpb24tY2FsbCAob2xkIGZvcm1hdClcclxuICAgIGlmIChtZXNzYWdlPy50eXBlID09PSAndG9vbC1jYWxscycgfHwgbWVzc2FnZT8udHlwZSA9PT0gJ2Z1bmN0aW9uLWNhbGwnIHx8IG1lc3NhZ2U/LmZ1bmN0aW9uQ2FsbCkge1xyXG4gICAgICAvLyBWQVBJIG5ldyBmb3JtYXQ6IHRvb2xDYWxsTGlzdCBhcnJheVxyXG4gICAgICBjb25zdCB0b29sQ2FsbHMgPSBtZXNzYWdlPy50b29sQ2FsbExpc3QgfHwgbWVzc2FnZT8udG9vbFdpdGhUb29sQ2FsbExpc3QgfHxcclxuICAgICAgICAobWVzc2FnZT8uZnVuY3Rpb25DYWxsID8gW3sgaWQ6IG1lc3NhZ2UuZnVuY3Rpb25DYWxsLmlkIHx8ICd1bmtub3duJywgbmFtZTogbWVzc2FnZS5mdW5jdGlvbkNhbGwubmFtZSwgcGFyYW1ldGVyczogbWVzc2FnZS5mdW5jdGlvbkNhbGwucGFyYW1ldGVycyB9XSA6IFtdKVxyXG5cclxuICAgICAgLy8gSWYgdXNpbmcgb2xkIGZvcm1hdFxyXG4gICAgICBpZiAodG9vbENhbGxzLmxlbmd0aCA9PT0gMCAmJiBtZXNzYWdlPy5mdW5jdGlvbkNhbGwpIHtcclxuICAgICAgICBjb25zdCBmdW5jdGlvbkNhbGwgPSBtZXNzYWdlLmZ1bmN0aW9uQ2FsbFxyXG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uTmFtZSA9IGZ1bmN0aW9uQ2FsbC5uYW1lXHJcbiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IGZ1bmN0aW9uQ2FsbC5wYXJhbWV0ZXJzIHx8IHt9XHJcbiAgICAgICAgY29uc3QgdG9vbENhbGxJZCA9IGZ1bmN0aW9uQ2FsbC5pZCB8fCBib2R5Py50b29sQ2FsbElkIHx8ICd1bmtub3duJ1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhg8J+TniBGdW5jdGlvbjogJHtmdW5jdGlvbk5hbWV9LCBQYXJhbXM6YCwgcGFyYW1ldGVycywgYFRvb2xDYWxsSWQ6YCwgdG9vbENhbGxJZClcclxuXHJcbiAgICAgICAgbGV0IHJlc3VsdERhdGE6IGFueVxyXG5cclxuICAgICAgICBzd2l0Y2ggKGZ1bmN0aW9uTmFtZSkge1xyXG4gICAgICAgICAgY2FzZSAnZ2V0X3Rhc2tzJzpcclxuICAgICAgICAgICAgcmVzdWx0RGF0YSA9IGF3YWl0IGdldFRhc2tzKHRlbmFudElkKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnY3JlYXRlX3Rhc2snOlxyXG4gICAgICAgICAgICByZXN1bHREYXRhID0gYXdhaXQgY3JlYXRlVGFzayh0ZW5hbnRJZCwgcGFyYW1ldGVycylcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2NvbXBsZXRlX3Rhc2snOlxyXG4gICAgICAgICAgICByZXN1bHREYXRhID0gYXdhaXQgY29tcGxldGVUYXNrKHRlbmFudElkLCBwYXJhbWV0ZXJzLnRhc2tfaWQpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXN1bHREYXRhID0geyBlcnJvcjogYFVua25vd24gZnVuY3Rpb246ICR7ZnVuY3Rpb25OYW1lfWAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBSZXN1bHQ6YCwgcmVzdWx0RGF0YSlcclxuXHJcbiAgICAgICAgLy8gVkFQSSBleHBlY3RzIHJlc3VsdHMgYXJyYXkgd2l0aCB0b29sQ2FsbElkIGFuZCByZXN1bHQgYXMgU1RSSU5HXHJcbiAgICAgICAgY29uc3QgcmVzdWx0U3RyaW5nID0gdHlwZW9mIHJlc3VsdERhdGEgPT09ICdzdHJpbmcnID8gcmVzdWx0RGF0YSA6IEpTT04uc3RyaW5naWZ5KHJlc3VsdERhdGEpXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICAgIHJlc3VsdHM6IFt7XHJcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHRvb2xDYWxsSWQsXHJcbiAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0U3RyaW5nXHJcbiAgICAgICAgICB9XVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEhhbmRsZSBuZXcgdG9vbC1jYWxscyBmb3JtYXQgd2l0aCB0b29sQ2FsbExpc3RcclxuICAgICAgY29uc3QgcmVzdWx0cyA9IFtdXHJcbiAgICAgIGZvciAoY29uc3QgdG9vbENhbGwgb2YgdG9vbENhbGxzKSB7XHJcbiAgICAgICAgY29uc3QgZnVuY3Rpb25OYW1lID0gdG9vbENhbGwubmFtZSB8fCB0b29sQ2FsbC5mdW5jdGlvbj8ubmFtZVxyXG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB0b29sQ2FsbC5wYXJhbWV0ZXJzIHx8IHRvb2xDYWxsLmZ1bmN0aW9uPy5hcmd1bWVudHMgfHwge31cclxuICAgICAgICBjb25zdCB0b29sQ2FsbElkID0gdG9vbENhbGwuaWQgfHwgdG9vbENhbGwudG9vbENhbGw/LmlkIHx8ICd1bmtub3duJ1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhg8J+TniBGdW5jdGlvbjogJHtmdW5jdGlvbk5hbWV9LCBQYXJhbXM6YCwgcGFyYW1ldGVycywgYFRvb2xDYWxsSWQ6YCwgdG9vbENhbGxJZClcclxuXHJcbiAgICAgICAgbGV0IHJlc3VsdERhdGE6IGFueVxyXG5cclxuICAgICAgICBzd2l0Y2ggKGZ1bmN0aW9uTmFtZSkge1xyXG4gICAgICAgICAgY2FzZSAnZ2V0X3Rhc2tzJzpcclxuICAgICAgICAgICAgcmVzdWx0RGF0YSA9IGF3YWl0IGdldFRhc2tzKHRlbmFudElkKVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgY2FzZSAnY3JlYXRlX3Rhc2snOlxyXG4gICAgICAgICAgICByZXN1bHREYXRhID0gYXdhaXQgY3JlYXRlVGFzayh0ZW5hbnRJZCwgcGFyYW1ldGVycylcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIGNhc2UgJ2NvbXBsZXRlX3Rhc2snOlxyXG4gICAgICAgICAgICByZXN1bHREYXRhID0gYXdhaXQgY29tcGxldGVUYXNrKHRlbmFudElkLCBwYXJhbWV0ZXJzLnRhc2tfaWQpXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXN1bHREYXRhID0geyBlcnJvcjogYFVua25vd24gZnVuY3Rpb246ICR7ZnVuY3Rpb25OYW1lfWAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBSZXN1bHQgZm9yICR7ZnVuY3Rpb25OYW1lfTpgLCByZXN1bHREYXRhKVxyXG5cclxuICAgICAgICAvLyBDb252ZXJ0IHJlc3VsdCB0byBzdHJpbmcgKFZBUEkgcmVxdWlyZW1lbnQpXHJcbiAgICAgICAgY29uc3QgcmVzdWx0U3RyaW5nID0gdHlwZW9mIHJlc3VsdERhdGEgPT09ICdzdHJpbmcnID8gcmVzdWx0RGF0YSA6IEpTT04uc3RyaW5naWZ5KHJlc3VsdERhdGEpXHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgIHRvb2xDYWxsSWQ6IHRvb2xDYWxsSWQsXHJcbiAgICAgICAgICByZXN1bHQ6IHJlc3VsdFN0cmluZ1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHJlc3VsdHMgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyBIYW5kbGUgb3RoZXIgbWVzc2FnZSB0eXBlcyAodHJhbnNjcmlwdCwgZW5kLW9mLWNhbGwsIGV0Yy4pXHJcbiAgICBpZiAobWVzc2FnZT8udHlwZSA9PT0gJ2VuZC1vZi1jYWxsLXJlcG9ydCcpIHtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfk4ogQ2FsbCBlbmRlZDonLCBtZXNzYWdlKVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyByZWNlaXZlZDogdHJ1ZSB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHJlY2VpdmVkOiB0cnVlIH0pXHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBUb29sIGhhbmRsZXIgZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgcmVzdWx0OiB7IGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdJbnRlcm5hbCBlcnJvcicgfSB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbi8vIEhhbmRsZSBPUFRJT05TIGZvciBDT1JTXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBPUFRJT05TKCkge1xyXG4gIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKG51bGwsIHtcclxuICAgIHN0YXR1czogMjAwLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonLFxyXG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdQT1NULCBPUFRJT05TJyxcclxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uJyxcclxuICAgIH0sXHJcbiAgfSlcclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsInN1cGFiYXNlIiwiZ2V0VGFza3MiLCJ0ZW5hbnRJZCIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsIm5lcSIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibnVsbHNGaXJzdCIsImxpbWl0IiwiY29uc29sZSIsInRhc2tzIiwibWVzc2FnZSIsImNvdW50IiwibGVuZ3RoIiwiY3JlYXRlVGFzayIsInBhcmFtcyIsImluc2VydCIsInRlbmFudF9pZCIsInRpdGxlIiwicHJpb3JpdHkiLCJkdWVfZGF0ZSIsImRlc2NyaXB0aW9uIiwiZW5lcmd5X3JlcXVpcmVkIiwic3RhdHVzIiwic2luZ2xlIiwic3VjY2VzcyIsInRhc2siLCJjb21wbGV0ZVRhc2siLCJ0YXNrSWQiLCJ1cGRhdGUiLCJjb21wbGV0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImNhbGwiLCJ1cmwiLCJVUkwiLCJ1cmxUZW5hbnRJZCIsInNlYXJjaFBhcmFtcyIsImdldCIsImNvbnZlcnNhdGlvbklkIiwiY29udmVyc2F0aW9uX2lkIiwicGF5bG9hZFRlbmFudElkIiwibWV0YWRhdGEiLCJhc3Npc3RhbnRPdmVycmlkZXMiLCJ2YXJpYWJsZVZhbHVlcyIsImFzc2lzdGFudCIsInJlc3VsdCIsInR5cGUiLCJmdW5jdGlvbkNhbGwiLCJ0b29sQ2FsbHMiLCJ0b29sQ2FsbExpc3QiLCJ0b29sV2l0aFRvb2xDYWxsTGlzdCIsImlkIiwibmFtZSIsInBhcmFtZXRlcnMiLCJmdW5jdGlvbk5hbWUiLCJ0b29sQ2FsbElkIiwicmVzdWx0RGF0YSIsInRhc2tfaWQiLCJyZXN1bHRTdHJpbmciLCJyZXN1bHRzIiwidG9vbENhbGwiLCJmdW5jdGlvbiIsImFyZ3VtZW50cyIsInB1c2giLCJyZWNlaXZlZCIsIk9QVElPTlMiLCJoZWFkZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/voice/tools/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvoice%2Ftools%2Froute&page=%2Fapi%2Fvoice%2Ftools%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvoice%2Ftools%2Froute.ts&appDir=C%3A%5CUsers%5Cbogum%5Cexoskull%5Cexoskull-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbogum%5Cexoskull%5Cexoskull-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();