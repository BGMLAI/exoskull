graph TB
    subgraph SOURCES["ğŸ“¡ SkÄ…d system wie co zaproponowaÄ‡?"]
        S1["ğŸ’¬ Rozmowy<br/>Co user mÃ³wi,<br/>o czym NIE mÃ³wi"]
        S2["ğŸ“Š Dane z urzÄ…dzeÅ„<br/>Oura: sen 4h!<br/>Telefon: 10h ekranu"]
        S3["âœ… Zadania<br/>5 przeterminowanych,<br/>3 pilne"]
        S4["ğŸ“… Wzorce<br/>Zawsze zmÄ™czony<br/>w poniedziaÅ‚ki"]
    end

    subgraph MAPE["ğŸ”„ Cykl MAPE-K (co 15 min)"]
        MON["ğŸ“¡ MONITOR<br/>Zbierz dane<br/>ze wszystkich ÅºrÃ³deÅ‚"]
        ANA["ğŸ” ANALYZE<br/>ZnajdÅº problemy:<br/>â€¢ DÅ‚ug senny >6h<br/>â€¢ Za duÅ¼o zadaÅ„<br/>â€¢ Brak aktywnoÅ›ci<br/>â€¢ Åšlepe punkty"]
        PLAN["ğŸ“‹ PLAN<br/>Zaplanuj interwencje<br/>(max 3 na cykl):<br/>â€¢ Alert zdrowotny<br/>â€¢ Przypomnienie<br/>â€¢ Propozycja moda"]
        GUARD["ğŸ›¡ï¸ GUARDIAN<br/>Czy to naprawdÄ™<br/>pomoÅ¼e?<br/>Score: 0-100"]
    end

    subgraph DECIDE["ğŸ” Czy ma uprawnienia?"]
        AUTO["ğŸŸ¢ Auto-wykonaj<br/>(niski impact, ma zgodÄ™)"]
        ASK["ğŸŸ¡ Zapytaj usera<br/>(wysoki impact,<br/>brak zgody)"]
    end

    subgraph ACTIONS["âš¡ Typy sugestii"]
        A1["ğŸ”” Alert zdrowotny<br/>Sen poniÅ¼ej normy!"]
        A2["ğŸ“± SMS z przypomnieniem<br/>Nie zapomnij o lekach"]
        A3["ğŸ“Š Wykryty Å›lewy punkt<br/>Nie Å›ledzisz finansÃ³w"]
        A4["ğŸ§© Zaproponuj Mod<br/>Chcesz tracker nastroju?"]
        A5["ğŸ“… Optymalizacja<br/>PrzenieÅ› spotkanie,<br/>Å›pisz za maÅ‚o"]
    end

    subgraph LEARN["ğŸ§  KNOWLEDGE - Ucz siÄ™"]
        L1["User kliknÄ…Å‚: Pomocne âœ…"]
        L2["User kliknÄ…Å‚: Niepomocne âŒ"]
        L3["NastÄ™pne sugestie<br/>bÄ™dÄ… lepsze"]
    end

    SOURCES --> MON
    MON --> ANA --> PLAN --> GUARD
    GUARD -->|"score > 50"| DECIDE
    GUARD -->|"score < 50"| BLOCK["ğŸš« Zablokuj<br/>Za maÅ‚a korzyÅ›Ä‡"]
    AUTO --> ACTIONS
    ASK -->|"User: TAK"| ACTIONS
    ACTIONS --> LEARN
    LEARN -->|"feedback"| MON

    style SOURCES fill:#22d3ee,stroke:#06b6d4,color:#000
    style MAPE fill:#1e1e2e,stroke:#6366f1,color:#fff
    style ACTIONS fill:#22c55e,stroke:#16a34a,color:#fff
    style LEARN fill:#a855f7,stroke:#9333ea,color:#fff
    style MON fill:#22d3ee,stroke:#06b6d4,color:#000
    style ANA fill:#3b82f6,stroke:#2563eb,color:#fff
    style PLAN fill:#f59e0b,stroke:#d97706,color:#000
    style GUARD fill:#ef4444,stroke:#dc2626,color:#fff
