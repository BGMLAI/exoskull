graph TB
    subgraph WANT["ğŸ¤– ExoSkull chce coÅ› zrobiÄ‡"]
        ACTION["np. WysÅ‚aÄ‡ SMS<br/>z przypomnieniem"]
    end

    subgraph CHECK["ğŸ” Sprawdzanie uprawnieÅ„"]
        PERM{"Czy uÅ¼ytkownik<br/>daÅ‚ zgodÄ™ na<br/>ten typ akcji?"}
    end

    subgraph YES_PATH["âœ… TAK - ma zgodÄ™"]
        EXEC["Wykonaj akcjÄ™"]
        LOG["Zaloguj wynik"]
        LEARN["Ucz siÄ™ z feedbacku"]
    end

    subgraph NO_PATH["âŒ NIE - brak zgody"]
        PROPOSE["Zaproponuj akcjÄ™"]
        WAIT["Czekaj na decyzjÄ™"]
        APPROVE{"UÅ¼ytkownik<br/>akceptuje?"}
    end

    subgraph EXAMPLES["ğŸ“‹ Typy uprawnieÅ„"]
        EX1["send_sms:reminder âœ…<br/>MoÅ¼e wysyÅ‚aÄ‡ przypomnienia"]
        EX2["create_task:* âœ…<br/>MoÅ¼e tworzyÄ‡ dowolne zadania"]
        EX3["transfer_money âŒ<br/>Zawsze pyta o zgodÄ™"]
        EX4["cancel_event:* âœ…<br/>MoÅ¼e odwoÅ‚ywaÄ‡ wydarzenia"]
    end

    ACTION --> PERM
    PERM -->|"TAK"| EXEC
    EXEC --> LOG --> LEARN
    PERM -->|"NIE"| PROPOSE
    PROPOSE --> WAIT --> APPROVE
    APPROVE -->|"TAK"| EXEC
    APPROVE -->|"NIE"| DROP["Anuluj"]

    style WANT fill:#6366f1,stroke:#4f46e5,color:#fff
    style CHECK fill:#f59e0b,stroke:#d97706,color:#000
    style YES_PATH fill:#22c55e,stroke:#16a34a,color:#fff
    style NO_PATH fill:#ef4444,stroke:#dc2626,color:#fff
    style EXAMPLES fill:#374151,stroke:#6b7280,color:#fff
